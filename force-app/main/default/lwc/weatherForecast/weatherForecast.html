<template>
    <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
         Next-Gen Weather Forecast â€” Glassmorphism Theme
         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
    <div class="weather-app">
        <!-- â”€â”€â”€ Search Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div class="search-section">
            <div class="search-container">
                <lightning-input
                    type="text"
                    placeholder="Search city, state or zip code..."
                    value={searchQuery}
                    onchange={handleSearchInput}
                    onkeyup={handleKeyUp}
                    variant="label-hidden"
                    class="search-input"
                ></lightning-input>
                <button class="search-btn" onclick={handleSearch} title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2.5"
                         stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </div>
        </div>

        <!-- â”€â”€â”€ Loading Skeleton â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <template if:true={isLoading}>
            <div class="skeleton-wrapper">
                <div class="skeleton-hero">
                    <div class="skeleton-line skeleton-lg"></div>
                    <div class="skeleton-line skeleton-xl"></div>
                    <div class="skeleton-line skeleton-md"></div>
                </div>
                <div class="skeleton-grid">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
        </template>

        <!-- â”€â”€â”€ Error State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <template if:true={errorMessage}>
            <div class="error-container">
                <div class="error-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="1.5"
                         stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                </div>
                <p class="error-text">{errorMessage}</p>
            </div>
        </template>

        <!-- â”€â”€â”€ Weather Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <template if:true={hasWeatherData}>
            <!-- Hero Section -->
            <div class="hero-section">
                <div class="hero-location">
                    <h1 class="location-name">{locationDisplay}</h1>
                    <p class="location-coords">{coordsDisplay}</p>
                </div>

                <div class="hero-main">
                    <div class="hero-temp-group">
                        <div class="weather-icon-container">
                            <img src={currentIconUrl} alt={weatherData.current.description} class="weather-icon-hero" />
                        </div>
                        <span class="hero-temp">{currentTempRounded}</span>
                        <span class="hero-unit">Â°C</span>
                    </div>
                    <p class="hero-description">{weatherData.current.description}</p>
                    <p class="hero-feels-like">Feels like {feelsLikeRounded}Â°C</p>
                </div>

                <!-- Detail Chips -->
                <div class="detail-chips">
                    <div class="chip">
                        <span class="chip-icon">ğŸ’§</span>
                        <span class="chip-label">Humidity</span>
                        <span class="chip-value">{weatherData.current.humidity}%</span>
                    </div>
                    <div class="chip">
                        <span class="chip-icon">ğŸ’¨</span>
                        <span class="chip-label">Wind</span>
                        <span class="chip-value">{windDisplay}</span>
                    </div>
                    <div class="chip">
                        <span class="chip-icon">ğŸ‘</span>
                        <span class="chip-label">Visibility</span>
                        <span class="chip-value">{visibilityDisplay}</span>
                    </div>
                    <div class="chip">
                        <span class="chip-icon">ğŸŒ¡</span>
                        <span class="chip-label">Pressure</span>
                        <span class="chip-value">{weatherData.current.pressure} hPa</span>
                    </div>
                </div>

                <!-- High / Low -->
                <div class="high-low-bar">
                    <span class="high-low">
                        <span class="hl-arrow hl-up">â†‘</span> {tempMaxRounded}Â°
                    </span>
                    <span class="high-low">
                        <span class="hl-arrow hl-down">â†“</span> {tempMinRounded}Â°
                    </span>
                    <span class="high-low sunrise-sunset">
                        <span class="hl-arrow">ğŸŒ…</span> {sunriseTime}
                    </span>
                    <span class="high-low sunrise-sunset">
                        <span class="hl-arrow">ğŸŒ‡</span> {sunsetTime}
                    </span>
                </div>
            </div>

            <!-- â”€â”€â”€ 7-Day Forecast Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <template if:true={hasForecast}>
                <div class="forecast-section">
                    <h2 class="forecast-title">Daily Forecast</h2>
                    <div class="forecast-scroll">
                        <template for:each={weatherData.daily} for:item="day">
                            <div key={day.dayName} class="forecast-card">
                                <span class="fc-day">{day.dayName}</span>
                                <span class="fc-date">{day.dateStr}</span>
                                <img src={day.iconUrl} alt={day.description} class="fc-icon" />
                                <span class="fc-desc">{day.main}</span>
                                <div class="fc-temps">
                                    <span class="fc-high">{day.tempHigh}Â°</span>
                                    <span class="fc-low">{day.tempLow}Â°</span>
                                </div>
                                <div class="fc-detail">
                                    <span class="fc-rain">ğŸ’§ {day.pop}%</span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
        </template>

        <!-- â”€â”€â”€ Welcome State (no data yet) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <template if:false={showContent}>
            <div class="welcome-container">
                <div class="welcome-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="1"
                         stroke-linecap="round" stroke-linejoin="round" class="welcome-svg">
                        <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
                    </svg>
                </div>
                <h2 class="welcome-title">Weather Forecast</h2>
                <p class="welcome-text">Search for a city or zip code to see current conditions and a multi-day forecast.</p>
            </div>
        </template>
    </div>
</template>
